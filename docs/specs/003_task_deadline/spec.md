---
Title: 期限設定 (Deadline)
Status: Ready
Created: 2026-01-19
Last updated: 2026-01-19
Source: ../000_backlog/task-deadline.md
---

# 期限設定 (Deadline)

## 1. Goal
タスクに締切日（日付のみ）を設定可能にし、ユーザーが計画的にタスクを消化できるようにする。これにより、「いつまでにやるべきか」が可視化される。

## 2. Non-goals
- 時間指定（何時何分まで）は扱わない。
- Google Calendar等の外部カレンダー連携。
- プッシュ通知やメールによるリマインダー。
- 期限切れタスクの自動アーカイブやステータス変更。

## 3. User Scenarios & Testing

### シナリオ1: 締切日付きタスクの作成
- **Given**: ユーザーがタスク作成フォームを開いている。
- **When**: ユーザーがタイトルに「レポート提出」と入力し、締切日ピッカーで「2026-12-31」を選択する。
- **Then**: 作成されたタスクが一覧に表示され、その締切日が「2026-12-31」となっている。

### シナリオ2: タスク編集での締切日の追加・変更
- **Given**: 締切日が設定されていない既存タスク「牛乳を買う」がある。
- **When**: ユーザーがそのタスクを編集し、締切日として「2026-12-25」を選択する。
- **Then**: タスクが更新され、一覧表示で「2026-12-25」と表示される。

### シナリオ3: 締切日の削除
- **Given**: 締切日「2026-12-31」が設定されたタスクがある。
- **When**: ユーザーがそのタスクを編集し、締切日フィールドをクリア（削除）する。
- **Then**: タスクが更新され、一覧表示で締切日が表示されなくなる（または空の状態が明確になる）。

### シナリオ4: 締切日の表示形式
- **Given**: 締切日「2026-10-01」が設定されたタスクが存在する。
- **When**: ユーザーがタスク一覧を表示する。
- **Then**: 締切日が「2026-10-01」（YYYY-MM-DD）または同様の読みやすい形式で表示される。

## 4. Edge Cases
- **Past Date**: ユーザーは過去の日付を設定できる（実績記録や遅れたタスクの管理のため、禁止はしない）。
- **Invalid Date**: フロントエンドのDate Pickerで無効な日付（例: 2月30日）は入力できないようにする。API側でも正しい日付フォーマット検証を行う。
- **Timezone**: 基本的に日付のみを扱い、ユーザーのローカルタイムゾーンまたはUTCでの日付保持を統一する（今回は日付文字列 `YYYY-MM-DD` として保存・扱うのがシンプル）。

## 5. Requirements

### Functional Requirements
- **FR-001**: Taskモデルに `dueDate` フィールド（Date型またはNullable Date型）を追加する。
- **FR-002**: `POST /todos` APIは `dueDate` フィールドを受け入れ、保存できる。
- **FR-003**: `PUT /todos/{id}` APIは `dueDate` フィールドを受け入れ、更新できる（null送信で削除）。
- **FR-004**: タスク作成・編集UIに日付選択コンポーネント（ブラウザ標準 `<input type="date">` で可）を追加する。
- **FR-005**: タスク一覧表示コンポーネントで、各タスクの締切日を表示する。

### Non-functional Requirements
- **NFR-001**: UIのレイアウト崩れを防ぐため、日付表示は適切なスペースを確保する（未設定時は空欄または"-"などを表示）。

## 6. Open Questions
- ソート機能: "締切日が近い順" への並び替えが必要か？
    - -> MVPでは必須としないが、将来的に必要になる可能性が高い。今回はDB上の保存と表示を優先。
